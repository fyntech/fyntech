sudo: false
dist: "trusty"
language: ruby
addons:
  apt:
    packages:
      - "python3"
      - "python3-pip"
      - "python-bs4"
      - "python-requests"
cache: bundler
branches: { only: master }

rvm:
  - ruby-2.4.1

before_script:
  - python3 scripts/prosa-events.py

script: 
  - bundle exec jekyll build

deploy:
  provider: pages
  local-dir: _site
  skip_cleanup: true
  github_token: $GITHUB_TOKEN # Set in travis-ci.org dashboard
  target_branch: gh-pages
  email: kfc@tutanota.com
  on:
    branch: master
