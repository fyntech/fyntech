sudo: false
language: ruby
cache: bundler
branches: { only: master }

rvm:
  - ruby-2.4.3
python:
  - '3.2'

before_script:
  - pip install beautifulsoup4
  - pip install requests
  - python scripts/prosa-events.py

script: 
  - bundle exec jekyll build

deploy:
  provider: pages
  local-dir: _site
  skip_cleanup: true
  github_token: $GITHUB_TOKEN # Set in travis-ci.org dashboard
  target_branch: gh-pages
  email: kfc@tutanota.com
  on:
    branch: master
